function transitionView(i,o,t){function n(){t.position&&s(),e.transition({opacity:0,queue:!1},t.speed,"snap"),a.transition({opacity:1,queue:!1,complete:function(){l.resolve()}},t.speed,"linear")}function s(){var i={};i=t.initialPosition?t.initialPosition:e.offset();var o=i.left,n=i.top;e.css("position","absolute"),a.css("position","absolute"),e.css("top",n),e.css("left",o),a.css("top",n),a.css("left",o)}t=$.extend({},{speed:300,type:"fade",position:!1,initialPosition:null,promiseMode:!1},t);var e=$(i),a=$(o),l=$.Deferred();return t.initialPosition?t.initialPosition=$(t.initialPosition).offset():t.initialPosition=null,n(),t.promiseMode?l.promise():void 0}$(".buttonbar").on("click",".button",function(i){$(i.target).hasClass("viewBtn1")&&transitionView(".v2",".v1"),$(i.target).hasClass("viewBtn2")&&transitionView(".v1",".v2",{position:!0,promiseMode:!0}).done(function(){console.log("promise finished")})});